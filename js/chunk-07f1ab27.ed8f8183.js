(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07f1ab27"],{1511:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"album py-5 bg-light"},[s("div",{staticClass:"container"},[s("UserProfileCardVue",{attrs:{user:e.user,isFollowed:e.isFollowed,isFetchingUser:e.isProcessing},on:{afterToggleIsFollowed:e.handleToggleIsFollowed}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("UserFollowingsCard",{attrs:{userFollowings:e.user.Followings}}),s("br"),s("UserFollowerCard",{attrs:{UserFollowers:e.user.Followers}})],1),s("div",{staticClass:"col-md-8"},[s("UserCommentsCard",{attrs:{UserComments:e.user.Comments}}),s("br"),s("UserFavoritedRestaurantsCard",{attrs:{FavoritedRestaurants:e.user.FavoritedRestaurants}})],1)])],1)])},a=[],n=s("5530"),i=s("1da1"),o=(s("96cf"),s("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card mb-3"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-4"},[s("img",{attrs:{src:e._f("emptyImageFilter")(e.user.image),width:"300px",height:"300px"}})]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[e._v(e._s(e.user.name))]),s("p",{staticClass:"card-text"},[e._v(e._s(e.user.email))]),s("ul",{staticClass:"list-unstyled list-inline"},[s("li",[s("strong",[e._v(e._s(e.user.Comments?e.user.Comments.length:0))]),e._v(" 已評論餐廳 ")]),s("li",[s("strong",[e._v(e._s(e.user.FavoritedRestaurants?e.user.FavoritedRestaurants.length:0))]),e._v(" 收藏的餐廳 ")]),s("li",[s("strong",[e._v(e._s(e.user.Followings?e.user.Followings.length:0))]),e._v(" followings (追蹤者) ")]),s("li",[s("strong",[e._v(e._s(e.user.Followers?e.user.Followers.length:0))]),e._v(" followers (追隨者) ")])]),e.isFetchingUser?s("p",[e._v("資料載入中...")]):s("p",[e.user.id===e.currentUser.id?s("router-link",{attrs:{to:{name:"user-edit",params:{id:e.currentUser.id}}}},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("edit")])]):[e.isFollowed?s("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.deleteFollowing(e.user.id)}}},[e._v(" 取消追蹤 ")]):s("button",{staticClass:"btn btn-info",on:{click:function(t){return e.addFollowing(e.user.id)}}},[e._v(" 追蹤 ")])]],2)])])])])}),l=[],c=s("2708"),u=s("2f62"),d=s("2fa3"),m=s("4cce"),f={name:"UserProfileCard",mixins:[c["a"]],props:{user:{type:Object,required:!0},isFollowed:{type:Boolean,required:!0},isFetchingUser:{type:Boolean,default:!0}},data:function(){return{}},methods:{addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m["a"].addFollow(e);case 3:if(r=s.sent,a=r.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:d["a"].fire({icon:"success",title:"已追蹤！"}),t.$emit("afterToggleIsFollowed"),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),d["a"].fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m["a"].deleteFollow(e);case 3:if(r=s.sent,a=r.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:d["a"].fire({icon:"success",title:"已取消追蹤！"}),t.$emit("afterToggleIsFollowed"),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),d["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試！"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()}},computed:Object(n["a"])({},Object(u["b"])(["currentUser"])),watch:{isFollowed:function(e){this.isFollowed=e}}},g=f,v=s("2877"),w=Object(v["a"])(g,o,l,!1,null,null,null),F=w.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[e._v(e._s(e.userFollowings?e.userFollowings.length:0))]),e._v(" followings (追蹤者) ")]),s("div",{staticClass:"card-body"},[e.userFollowings?e._l(e.userFollowings,(function(t){return s("div",{key:t.id,staticClass:"followingImage"},[s("img",{attrs:{src:e._f("emptyImageFilter")(t.image),alt:""}})])})):e._e()],2)])},h=[],C={name:"UserFollowingsCard",mixins:[c["a"]],props:{userFollowings:{type:Array,default:function(){return[]}}}},_=C,b=(s("509d"),Object(v["a"])(_,p,h,!1,null,"03334e84",null)),U=b.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[e._v(e._s(e.UserFollowers?e.UserFollowers.length:0))]),e._v(" followers (追隨者) ")]),s("div",{staticClass:"card-body"},[e.UserFollowers?e._l(e.UserFollowers,(function(t){return s("div",{key:t.id,staticClass:"followerImage"},[s("img",{attrs:{src:e._f("emptyImageFilter")(t.image),alt:""}})])})):e._e()],2)])},x=[],R={name:"UserFollowerCard",mixins:[c["a"]],props:{UserFollowers:{type:Array,default:function(){return[]}}}},k=R,j=(s("714c"),Object(v["a"])(k,y,x,!1,null,"159754ea",null)),O=j.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[e._v(e._s(e.UserComments?e.UserComments.length:0))]),e._v(" 已評論餐廳 ")]),s("div",{staticClass:"card-body"},e._l(e.UserComments,(function(t){return s("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.RestaurantId}}}},[s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImageFilter")(t.Restaurant.image),width:"60",height:"60"}})])})),1)])},E=[],$={name:"UserCommentsCard",mixins:[c["a"]],props:{UserComments:{type:Array,default:function(){return[]}}}},P=$,T=(s("fd10"),Object(v["a"])(P,I,E,!1,null,"57f72a92",null)),A=T.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[e._v(e._s(e.FavoritedRestaurants?e.FavoritedRestaurants.length:0))]),e._v(" 收藏的餐廳 ")]),s("div",{staticClass:"card-body"},e._l(e.FavoritedRestaurants,(function(t){return s("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[s("img",{staticClass:"avatar",attrs:{src:e._f("emptyImageFilter")(t.image),width:"60",height:"60"}})])})),1)])},D=[],B={name:"UserFavoritedRestaurantsCard",mixins:[c["a"]],props:{FavoritedRestaurants:{type:Array,require:!0}}},J=B,V=(s("cf2e"),Object(v["a"])(J,q,D,!1,null,"1acc99d8",null)),z=V.exports,G={name:"user",components:{UserProfileCardVue:F,UserFollowingsCard:U,UserFollowerCard:O,UserCommentsCard:A,UserFavoritedRestaurantsCard:z},created:function(){var e=this.$route.params.id;this.fetchUserData(e)},beforeRouteUpdate:function(e,t){var s=e.params.id;this.fetchUserData(s)},data:function(){return{user:{},isFollowed:!1,isProcessing:!1}},methods:{fetchUserData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a,n,i,o,l,c,u,f,g;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,s.next=4,m["a"].get(e);case 4:if(r=s.sent,200===r.status){s.next=7;break}throw new Error(r.statusText);case 7:console.log("response"),console.log(r),a=r.data.profile,n=a.id,i=a.name,o=a.email,l=a.image,c=a.Comments,u=a.FavoritedRestaurants,f=a.Followings,g=a.Followers,t.user={id:n,name:i,email:o,image:l,Comments:c||[],FavoritedRestaurants:u||[],Followings:f||[],Followers:g||[]},t.isFollowed=r.data.isFollowed,t.isProcessing=!1,s.next=20;break;case 15:s.prev=15,s.t0=s["catch"](0),t.isProcessing=!1,console.log(s.t0),d["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試！"});case 20:case"end":return s.stop()}}),s,null,[[0,15]])})))()},handleToggleIsFollowed:function(){this.isFollowed=!this.isFollowed}},computed:Object(n["a"])({},Object(u["b"])(["currentUser"]))},H=G,K=Object(v["a"])(H,r,a,!1,null,null,null);t["default"]=K.exports},"3f13":function(e,t,s){},"509d":function(e,t,s){"use strict";s("b15a")},"714c":function(e,t,s){"use strict";s("8f85")},"8f85":function(e,t,s){},b15a:function(e,t,s){},cf2e:function(e,t,s){"use strict";s("dbec")},dbec:function(e,t,s){},fd10:function(e,t,s){"use strict";s("3f13")}}]);
//# sourceMappingURL=chunk-07f1ab27.ed8f8183.js.map